<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="loader.js"></script>
    <script src="list.js"></script>
    <script>
        const g_container_id = "list-container-template";
        const g_item_id = "list-item-template"; 
        const g_list_item_query = ".list-item";
        const g_list_container_query = ".list-container";
        document.addEventListener("DOMContentLoaded", (event) => {
           debug("hi")

            /*
                const request = fetcher("https://mwe85.github.io/daily_html/pages.json");
                weird bug, it wont return the promise.
            */
            const request = (new FetchRequestor()).request(gURL);
            
            debug(`type of request: ${request}`)

            if(request){
                request.then((response) =>{
                    debug("handling response")
                    if(response.hasOwnProperty("pages")){
                        const pages = response.pages;
                        if(pages.constructor === Array){
                            debug(`pages len: ${pages.length}`);

                            //build the list
                            const pb = new PrototypeBuilder(
                                pages, 
                                g_container_id, 
                                g_item_id,
                                g_list_container_query,
                                g_list_item_query
                            );

                        }else{
                            //not an array object
                            alert(`pages isnt an array:${pages}`);
                        }
                    }
                }).catch((error)=>{
                    alert(`error ${error}`);
                });
            }else{
                debug("promise is null")
            }

            debug("done")
        });
    </script>
</head>
<body>
    <div>
        <pre id="debug"></pre>
    </div>
    <main>
        <section>
            a collection of html/css/js demos
            <a href="./day1-html/main_sap.html">day 1 project: a single page application that serves as a catalogue viewer of these demos</a><br>
            <a href="./day2-html/day2.html">day 2: manipulating the dom elements via JS</a>            
        </section>
        <section class="projects">

        </section>
    </main>
</body>
<template id="list-container-template">
    <ol class="list-container">

    </ol>
</template>
<template id="list-item-template">
    <li class="list-item">
        <a href=""></a>
    </li>
</template>
</html>